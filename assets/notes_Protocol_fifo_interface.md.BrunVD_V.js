import{_ as i,c as a,a2 as n,o as h}from"./chunks/framework.CbP2pKAi.js";const k="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUsAAACXCAYAAACcPHl+AAAPlklEQVR4Ae3dzYslVxnH8WejkI0SZhtwOWvX2URFt27cBQli/oEQCBlhSHATCO4dIQs3k0RFFwlCIokbJYgQHdBIUETwjUBCjMkkmclMvPLrub/mqTOnqqtvV1XXy7egpu45dV6qHvr59Kl7m7lxNR7YsU8Tg2AjAgNH4Itf+caOfZoYhKB8Mx5lHzkGivPAecJwRCAE5cOPPcU+cgwUZ7AcGUn/IgJLZBsjAmA5zS8KsJwISoEJlmNQwZhgCZare1sALIFtjAiAJViC5RiZxZiriwBYgiVYri6tuaExIgCWYAmWY2QWY64uAmAJlmC5urTmhsaIAFiCJViOkVmMuboIgCVYguXq0pobGiMCYAmWYDlGZjHm6iIAlmAJlqtLa25ojAiAJViC5RiZxZiriwBYgiVYri6tuaExIgCWYAmWY2QWY64uAmAJlmC5urTmhsaIAFiCJViOkVmMuboIgCVYguXq0pobGiMCYAmWYDlGZjHm6iIAlmAJlvNM64sR8XJE6Ji3tnq30fnnIuJCRNwfEVci4h6f3B9VVv2DRb2L6qvzOrZtl1v6a86X0vxqt4oNLMESLOeZym2gCbgagL6LjKXrymPb2G4n4IRe19YHS/XvM1bXPLM5B5ZgCZazSce7LqSEMSPn1/pyNu0GNGNZriwFl9pq5am9trJU/6f3q9E8li5OK031U33GUuVr+7FV75Wl+uTx7rrBJVWAJViC5XwzVtDkR3GV/YgtlLRrE2ICSjjmNhlLwWjE1Ea41bBUnesNsleZeTxj6bndp8RSYwhfzbnoDSzBEiznm8IlVgLJQOarzu3asDRu7leWc71xVJ3aec7cx6/zfGpflj1GHtNzLeoIlmAJlvNOWQPpFZzREUp+9PWjuM5lrFTW4/m9+6NXfwYsl1WX0XVUPMZ96RE899d5r1hVn+f3GIJV7Ra9gSVYguW8U9gYfT29L2nUjJ3LapuxUtnvZXol6Lsty7k+w+b3KTW/38tUW/fP86m+LLttHtNzLeoIlmAJlvNOWa8otXoscXRZEOm8jhkrlY2lXnsFqDZ93rN0ZARjnl/1xtJQ+1pU73nUTud5z/KxaaB5eAXz6JdS6Pus34xH2UeOwQq/N1wACTch581ACjGdN15tWKqf2qi9MHsk4esxdVT/vIJUneYq5/d87uO3BDSugBbyPleOtz+1rAMry2nAB8uRgcy/hFaI5dSqCEIBOcQ25FhDXM/BY4AlWK5upQuWB3vgjloV5tWh6097FLjCchUbWIIlWK4ilbmJsSMAlmAJlmNnGeOvIgJgCZZguYpU5ibGjgBYgiVYjp1ljL+ECHw+In4fEY+3XSxYgiVYtmUH9VuLwM8i4lZEfFxDEyzBEiy3RgL32xaBL0TE9f3fot4o0QRLsFwrlk9EBDsxOO3PwBt7LPXH+9qN5kNgCZZrxfLJiGAnBqf9GahhKTC/BZZguVYs2x61qCcCbREoH8OF5CU3BkuwBEtnA8etR+Cn+w94Gkg6KGAJlmDpbOC45Qj4T4eOV5JlMMASLMGyzArKRKASAbAES7CsJAZVRKCMAFiCJViWWUGZCFQiAJZgCZaVxKCKCJQRAEuwBMsyKygTgUoEwBIswbKSGFQRgTICYAmWYFlmBWUiUIkAWIIlWFYSgyoiUEYALMESLMusoEwEKhEAS7AEy0piUEUEygiAJViCZZkVlIlAJQJgCZZgWUkMqohAGQGwBEuwLLOCMhGoRAAswRIsK4lBFREoIwCWYAmWZVZQJgKVCIAlWIJlJTGoIgJlBMASLMGyzIplly9GxLXiS7dUVn2f7XJEPNin4dbagCVYguW6sl4ovlzgeP8e0D5ggmXLzwNYgiVYtiTHQqtrWOpWhKB2bfdExJW0+tRr1WlF6a+A1eu2dvthtnUAS7AEy3XlfBuWWl0axQznhYh4KSJ0XlteWXa12zffzgEswRIs15XvfbDMd+zVYw3Lrnb53CZegyVYguW6Ur0NSz1We2WpNuWHQDUsu9qtK2o97gYswRIseyTKgpq0YelHaq8k/Ym3yyWWrm9rt6CQDHOpYAmWYDlMLs1llBqWgtB/PlQiqHP6UOckLMt2c7nfya4DLMESLCdLt0kmqj06G0pfgOETkl5xegWpo+p17GrnsTZzBEuwBMvNpDs3epYIgCVYguVZMoi+m4kAWIIlWG4m3bnRs0QALBeC5c033trVtk/fv7H79zefPXfw3vnuL3a3375+dC35ta5N9ap7Mx6dZL8aD+g9NzYiMGgExsLyX2+9fVdq37p9e/fiK7/ePfzYsEB97wfP7t597/3dr357bfCxh7pWxTmUxGcFQ/gIyPee+c2ZxzrrtbT1B8tBc5TBpovAV7umGhNLgZmx+dNf/naEmnDL9Vt4PSqWglOA/u/m7d2tf763+/uXv7/78JU/H/+2Ur1XdlqhfvLXd47aqoHbC768etVr1Rm+G6//42g8jeX5VFG2+8+V146uRec+/fCT3afvfnTcL1/DUeVud3Sdnkf34P0sq2VWll0pz7mOCPw3Im5ExOO1NlNiqVXlB9c/2j3z/AtHWKqs1aa2j2/cPK4XnvmcVo0GVqtHb67PK0sBLZQNsF4b7Txmnk9jqqxr8ZjuP9RxdCwziMbM4Ag0o6ajQNI54WX81MdwCluBqvNuI3wNqufSOY3ldn0ewzWO5/HYmju/1jxn2cGylurU9YjAQxFxfQ/mxyWaU2KZV5YCU0D50VmgGSqdE6rCTVgZQJXVR0cDqXN+rbG0e5xc3zWf+oz1FoGxHR1LA1hDRkBlLP1aKAouYZWxzGNkEFWfxxK4fj9S7U7C0vMZXo2na1G5nCdfw2lfg2UPFmjSFoG30/+8pFWm0fzMmFh6BehjbTWXV5ledWbwjI2OGVuV3e5HL756BKTKGVS9zmPm+bvO5TmHej06ll6tCRaj5MDraCCNU24nKFUWWt4MWkbQbTzWoVh6Dh81XjmP5jp032OpD3nYicEQPwM3I+KHY2Lpx1+v8PLjsWArN6/uShQNlurLTQD+/JevHWPpuTS+2vsauubTOa9GPdfQx0mxFHQZT5UNXBeWxsnY+vHYK8ahsDTOnk/HEbBsWzlQTwS6IlCuLLW6vBQRn50CS8GjlZwwFEwqdwHVdi7jlzHLQKre7QTlWebLc5z19blhqdWfHtFPwjKDKizze5ZDYWlsDbmvTXODZVf+cm6iCOT3LI3k8dRTYWnEvIIr30MUcH5Mzo/S6if0tNfqNV5+DFd7w+zxVNc1XxvO6jfUPimWRkjLcEH5wQtvHK8021aWXk166S7Aaiu+jGrbY7jnP/rw56lXj+b2h0IaU9fgzYiD5XFO8uL8IqBPw/XIrZXkXduUWBoswZhRU974Edw4CTBvBlbncr0xLFeWLvsR3GMa0XK+RWEpbNi7Y8AHPHflORX9IvC1rmZjYWmgON5ZnQ62sgTKbigVH7DsSnnOHRoBsBzuUbvrFwNYTrgiBstDOaBfVwTAEixX91gPll0pz7lDIwCWYAmWh2YP/TYVAbAES7DcVMpzs4dGACzBEiwPzR76bSoCYAmWYLmplOdmD40AWIIlWB6aPfTbVATAEizBclMpz80eGgGwBEuwPDR76LepCIAlWILlplKemz00AmAJlmB5aPbQb1MRAEuwBMtNpTw3e2gEwBIswfLQ7KHfpiIAlmAJlptKeW720AiAJViC5aHZM2y/y5XvDLoWERcHnOZCRLwUEfefckxdw9MRcc8J/fqMr7l1r4vbwBIswXIeaStASkQejIgrPZDqewd9MCvHEpCCsg/afcfXfZ4W7PK6Ji+DJViC5eRpV52whqWAei4ihJA2AeNvK8yICjSVTzqnNlpZfmnfPoPVBlheCXqe5/dz6ZzrNHff8fuuVPe3PY8DWIIlWM4jF2tY5pWlgHl5v8IzUOqjLfctV3c6Z1iNrY4a2/3VR22M8n7Y47HVXls5r+oOGV/j9F2t3pl5Bv+CJViC5QwScY+OV4Y+ahVowDKcumIBZgTzHRg0nc+v1SaX8+pObQ1nOVZGzf11LdpcLjFV+aTxNZ/77Yeb9wEswRIs55GjwsNgGSGjpCvUayPqozEVTPowyPU6CqJylelxdU6vDWEbXOqvtwE0vrbcX+WzjN82552ZZvgvWIIlWM4jMTOWuiID6NWXsDSm+YoNmGF12SBq9ekx8jmNoT6PdDyCq71BVfuy/0nlrvHBcsDv2u76ArClndMvpdB3w/DtjCd/O+NZY7TQ7+ApsTRmftQWnn7PUufUXufu3R+NpWD0yrIcozxnkGsIq6+2jFqJo85rXl9j3/FLhO/MNPN/WVmyslwd4CvC0o+5JYTC0I/gIsZIqd7ouo+B0zmhppWi2mvzOZf31Y2DzhnTWnvXnWZ8Ia3rUN/FbGAJlmC5mHQd/EKFVv7TpNoEAi0/itfatNW1jZ9Xq219Z1cPlmAJlrNLy0kuyKvRrlWlL+SQlWDb+Hml6vEXcQRLsATLRaQqF3neEQBLsATL885C5l9EBMASLMFyEanKRZ53BMASLLeG5aWIeD0iPnfeycf8y4oAWILlVrAUkjci4lZE/GRZacrVziECYAmWa8fSSApK/S3ghxFx3xySj2tYVgTAEizXiuW39ytJIykotf8hIp5gJwan/RkAS7BcM5Y392AaSh3/GBFPshOD0/4MgCVYrhVLP+N9JyIymjyGOzIcTxUBsATLtWPphDCa+oDnx67kSAT6RgAswXIrWDonhObv+NMhh4Nj3wiAJVhuDcu+uUE7ItCIAFiCJVg2UoICEahHACzBEizruUEtEWhEACzBEiwbKUGBCNQjAJZgCZb13KCWCDQiAJZgCZaNlKBABOoRAEuwBMt6blBLBBoRAEuwBMtGSlAgAvUIgCVYgmU9N6glAo0IgCVYgmUjJSgQgXoEwBIswbKeG9QSgUYEwBIswbKREhSIQD0CYAmWYFnPDWqJQCMCYAmWYNlICQpEoB4BsARLsKznBrVEoBEBsARLsGykBAUiUI8AWIIlWNZzg1oi0IgAWIIlWDZSggIRqEcALMESLOu5QS0RaEQALMESLBspQYEI1CMAlmAJlvXcoJYINCIAlmAJlo2UoEAE6hEAS7AEy3puUEsEGhEAS7AEy0ZKUCAC9QiAJViCZT03qCUCjQiAJViCZSMlKBCBegTAEizBsp4b1BKBRgTAEizBspESFIhAPQJgCZZgWc8NaolAIwJgCZZg2UgJCkSgHgGwBEuwrOcGtUSgEQGwBEuwbKQEBSJQjwBYgiVY1nODWiLQiABYTozl1Xhgxz5+DBo/5RSIwAAREJbs08Tg/3LzrFxHo/dHAAAAAElFTkSuQmCC",l="/assets/Untitled%201.MbByM_vE.png",t="/assets/Untitled%202.Czp5KboS.png",p="/assets/Untitled%203.CVi_Rb0a.png",e="/assets/Untitled%204.CuDwgg-i.png",r="/assets/Untitled%205.C5fXDHTc.png",d="/assets/Untitled%206.B6MVPp8T.png",F=JSON.parse('{"title":"FIFO interface (ready/valid)","description":"","frontmatter":{},"headers":[],"relativePath":"notes/Protocol/fifo_interface.md","filePath":"notes/Protocol/fifo_interface.md","lastUpdated":1727604100000}'),g={name:"notes/Protocol/fifo_interface.md"};function A(D,s,C,y,B,c){return h(),a("div",null,s[0]||(s[0]=[n('<h1 id="fifo-interface-ready-valid" tabindex="-1">FIFO interface (ready/valid) <a class="header-anchor" href="#fifo-interface-ready-valid" aria-label="Permalink to &quot;FIFO interface (ready/valid)&quot;">​</a></h1><h2 id="the-fifo-interface" tabindex="-1">The FIFO interface <a class="header-anchor" href="#the-fifo-interface" aria-label="Permalink to &quot;The FIFO interface&quot;">​</a></h2><p><img src="'+k+'" alt="Untitled"></p><p>Data is the wire that actually passes data from the transmitter to the Receiver.</p><p>Valid and Ready are known as handshaking signals which allow the Transmitter and the Receiver to communicate with regards to when it is time to pass the data.</p><p>The Valid signal (output from the Transmitter and input to the Receiver) indicates that the Transmitter has put valid data on the Data line <em>this</em> cycle.</p><p>The Ready signal (output from the Receiver and input to the Transmitter) indicates that the Receiver is ready to receive new data. Ready can be asserted as soon as the Receiver is ready to receive new data.</p><h2 id="state-machine" tabindex="-1">State machine <a class="header-anchor" href="#state-machine" aria-label="Permalink to &quot;State machine&quot;">​</a></h2><p><img src="'+l+'" alt="Untitled"></p><p>This state machine indicates once the transmitter assert the <code>vld</code> or the receiver assert the <code>rdy</code> signal, these signals must hold until their counterpart assert</p><h2 id="the-handshake-and-data-transfer" tabindex="-1">The handshake and data transfer <a class="header-anchor" href="#the-handshake-and-data-transfer" aria-label="Permalink to &quot;The handshake and data transfer&quot;">​</a></h2><p>The FIFO Interface handshake ensures that data passes from the source to the sink only when the source has valid data to pass and when the sink is ready to receive that data.</p><p><img src="'+t+'" alt="Untitled"></p><h3 id="example-waveform-explanation" tabindex="-1">Example waveform explanation <a class="header-anchor" href="#example-waveform-explanation" aria-label="Permalink to &quot;Example waveform explanation&quot;">​</a></h3><p><img src="'+p+`" alt="Untitled"></p><p>The positive clock edge marked with arrow indicating the transfer of the data is made (i.e. the handshake occurs) at the beginning of clock cycle 3, 5, 6 and 7 as demonstrated in Figure 1</p><h2 id="sample-code-snippet-and-sample-waveform" tabindex="-1">Sample code snippet and sample waveform <a class="header-anchor" href="#sample-code-snippet-and-sample-waveform" aria-label="Permalink to &quot;Sample code snippet and sample waveform&quot;">​</a></h2><h3 id="transmitter" tabindex="-1">Transmitter <a class="header-anchor" href="#transmitter" aria-label="Permalink to &quot;Transmitter&quot;">​</a></h3><div class="language-system-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">system-verilog</span><pre class="shiki shiki-themes vitesse-light vitesse-black vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">module</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> transmitter</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  input</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> clk</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">,</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  input</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rst_n</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">,</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  output</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> vld</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">,</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  output</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> [</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">7</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">,</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  input</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rdy</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">)</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  reg</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> next_vld</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  reg</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> [</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">7</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> next_data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  reg</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> [</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">7</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> hold_data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  reg</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> reg_vld</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  reg</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> [</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">7</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> reg_data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  logic</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> [</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">7</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> sent_data</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">[</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">$</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  typedef</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> enum</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">IDLE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">WAIT_RDY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">WAIT_VLD</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">TRANSFER</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ff_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  ff_state</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> current_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> IDLE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  ff_state</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">    =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> IDLE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  always</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> @</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    case</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">current_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">)</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">      IDLE</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> WAIT_RDY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> WAIT_VLD</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> TRANSFER</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> current_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">      end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">      </span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">      WAIT_RDY</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> TRANSFER</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> current_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">      end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">      </span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">      WAIT_VLD</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> TRANSFER</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> current_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">        </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">      end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">      </span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">      TRANSFER</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> WAIT_RDY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> WAIT_VLD</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> IDLE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> current_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">        </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">      end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">      </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    endcase</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">    </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  always</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> @</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">posedge</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> clk</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> or</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> negedge</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rst_n</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // Next state here is the previous state from the previous cycle</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    $display</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">[DEBUG </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">] next_vld: </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">, next_state: </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">, current_state: </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%d</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">$time</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">next_vld</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">next_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">current_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">    </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">rst_n</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      current_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> &lt;=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> IDLE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      reg_vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> &lt;=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      reg_data</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> &lt;=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      current_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> &lt;=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> next_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">      </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      next_vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> $urandom</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">      </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">      if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">next_vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> next_state</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> !</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> WAIT_RDY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        // Send next_data on the next cycle</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        next_data</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> $urandom_range</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        hold_data</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> next_data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        sent_data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">push_back</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">next_data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">      end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> WAIT_RDY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        next_data</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> hold_data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">      end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        next_data</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">      end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">      </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      reg_vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> &lt;=</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> #</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> WAIT_RDY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">?</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> :</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> next_vld</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      reg_data</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> &lt;=</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> #</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.1</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> next_data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    end</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  assign</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> reg_vld</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  assign</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> data</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> reg_data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">endmodule</span></span></code></pre></div><h3 id="receiver" tabindex="-1">Receiver <a class="header-anchor" href="#receiver" aria-label="Permalink to &quot;Receiver&quot;">​</a></h3><div class="language-system-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">system-verilog</span><pre class="shiki shiki-themes vitesse-light vitesse-black vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">module</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> receiver</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  input</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> clk</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">,</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  input</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rst_n</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">,</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  input</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> vld</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">,</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  input</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> [</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">7</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">,</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  output</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rdy</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">)</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  reg</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> next_rdy</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  reg</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> reg_rdy</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  logic</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> [</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">7</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> received_data</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">[</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">$</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">  </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  reg</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> no_random</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  typedef</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> enum</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">IDLE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">WAIT_RDY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">WAIT_VLD</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">TRANSFER</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ff_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  ff_state</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> current_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> IDLE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  ff_state</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">    =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> IDLE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  always</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> @</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    case</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">current_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">)</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">      IDLE</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      	no_random</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">        </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> WAIT_VLD</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> WAIT_RDY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> TRANSFER</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> current_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">      end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">      </span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">      WAIT_VLD</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        no_random</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> TRANSFER</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> current_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">      end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">      </span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">      WAIT_RDY</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">		no_random</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> TRANSFER</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> current_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">        </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">      end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">      </span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">      TRANSFER</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">        </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> WAIT_VLD</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> WAIT_RDY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reg_rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> vld</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> IDLE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> current_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">        </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">      end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">      </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    endcase</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">    </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  always</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> @</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">posedge</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> clk</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> or</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> negedge</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rst_n</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    $display</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">[DEBUG </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">] current data: </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">, current_state: </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">, next_state: </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%d</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">$time</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">current_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">next_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">    </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> TRANSFER</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      // Sample the data</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      $display</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">[DEBUG </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%0t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">] pushing </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> data value</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">$time</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      received_data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">push_back</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">    </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">    </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">rst_n</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      reg_rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> &lt;=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      current_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> &lt;=</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> #</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> IDLE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      reg_rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> &lt;=</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> #</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">next_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> ==</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> WAIT_VLD</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">?</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> :</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> $urandom</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      current_state</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> &lt;=</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> #</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.1</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> next_state</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    end</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  assign</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rdy</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> reg_rdy</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">endmodule</span></span></code></pre></div><h3 id="testbench" tabindex="-1">Testbench <a class="header-anchor" href="#testbench" aria-label="Permalink to &quot;Testbench&quot;">​</a></h3><div class="language-system-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">system-verilog</span><pre class="shiki shiki-themes vitesse-light vitesse-black vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">module</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> test_top</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  reg</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> _clk</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  reg</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> _rst_n</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">  </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  wire</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> [</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">7</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> _data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  wire</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> _vld</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  wire</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> _rdy</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">  </span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">  transmitter</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> tx</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_clk</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_rst_n</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_vld</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_rdy</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">)</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">;</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">  receiver</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> rx</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_clk</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_rst_n</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_vld</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_rdy</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">)</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  initial</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> begin</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  	$dumpfile</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">dump.vcd</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">);</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    $dumpvars</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">    </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    _clk</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    _rst_n</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">    </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    #</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10ns</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">    </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    _rst_n</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">    </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    #</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10ns</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">    </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    _rst_n</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">    </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    #</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1000ns</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">        </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    foreach</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">rx</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">received_data</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">[</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">i</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      $display</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">[DEBUG] RX RECEIVED </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">: </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%d</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">i</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">rx</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">received_data</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">[</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">i</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  	end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">    </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    foreach</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">tx</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">sent_data</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">[</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">i</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      $display</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">[DEBUG] TX SENT </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">: </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%d</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">i</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">tx</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">sent_data</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">[</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">i</span><span style="--shiki-light:#999999;--shiki-dark:#444444;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  	end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">    </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    $finish</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">  </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  always</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> #</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10ns</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> _clk</span><span style="--shiki-light:#999999;--shiki-dark:#444444;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ~</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_clk</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CACC;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">endmodule</span></span></code></pre></div><h3 id="sample-waveform" tabindex="-1">Sample waveform <a class="header-anchor" href="#sample-waveform" aria-label="Permalink to &quot;Sample waveform&quot;">​</a></h3><p><img src="`+e+'" alt="Untitled"></p><p><img src="'+r+'" alt="Untitled"></p><p><img src="'+d+'" alt="Untitled"></p><h2 id="references" tabindex="-1">References <a class="header-anchor" href="#references" aria-label="Permalink to &quot;References&quot;">​</a></h2><ul><li>Drake, C. (2020, August 3). Ready/Valid Protocol Primer. Drake Enterprises. <a href="http://www.cjdrake.com/readyvalid-protocol-primer.html" target="_blank" rel="noreferrer">http://www.cjdrake.com/readyvalid-protocol-primer.html</a></li><li>W. Fletcher, C. (2009). EECS150: Interfaces: “FIFO” (a.k.a. Ready/Valid) (B). <a href="https://inst.eecs.berkeley.edu/~cs150/Documents/Interfaces.pdf" target="_blank" rel="noreferrer">https://inst.eecs.berkeley.edu/~cs150/Documents/Interfaces.pdf</a></li></ul>',29)]))}const o=i(g,[["render",A]]);export{F as __pageData,o as default};
