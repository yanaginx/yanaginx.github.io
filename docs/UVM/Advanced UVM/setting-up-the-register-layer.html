<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-UVM/Advanced UVM/Setting up the Register Layer cac69577d55b4842a42551179a5b03ff">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Setting up the Register Layer | Duong Van (@yanagi.dev)</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://yanaginx.github.io/docs/UVM/Advanced UVM/setting-up-the-register-layer"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Setting up the Register Layer | Duong Van (@yanagi.dev)"><meta data-rh="true" name="description" content="Contents are extracted from the Advanced UVM sessions by Verification Academy."><meta data-rh="true" property="og:description" content="Contents are extracted from the Advanced UVM sessions by Verification Academy."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://yanaginx.github.io/docs/UVM/Advanced UVM/setting-up-the-register-layer"><link data-rh="true" rel="alternate" href="https://yanaginx.github.io/docs/UVM/Advanced UVM/setting-up-the-register-layer" hreflang="en"><link data-rh="true" rel="alternate" href="https://yanaginx.github.io/docs/UVM/Advanced UVM/setting-up-the-register-layer" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Duong Van (@yanagi.dev) RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Duong Van (@yanagi.dev) Atom Feed"><link rel="stylesheet" href="/assets/css/styles.cf3804fa.css">
<link rel="preload" href="/assets/js/runtime~main.f7de18b3.js" as="script">
<link rel="preload" href="/assets/js/main.ca8e2220.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">Howdy! This site is still under construction so there might be some missing content. Hope you still enjoy your stay here!</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-main.svg" alt="YNG.dev Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-main.svg" alt="YNG.dev Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">DV</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Notes</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/extras/site-info">Extras</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yanaginx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/systemverilog">SystemVerilog</a><button aria-label="Toggle the collapsible sidebar category &#x27;SystemVerilog&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Protocol/fifo_interface">Protocol</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/UVM/Advanced UVM/architecting-a-uvm-testbench">UVM</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/UVM/Advanced UVM/architecting-a-uvm-testbench">Advanced UVM</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/architecting-a-uvm-testbench">Architecting a UVM Testbench</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/how-tlm-works">How TLM Works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/layered-sequences">Layered Sequences</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/modeling-transactions">Modeling transactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/registered-based-testing">Register-Based Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/UVM/Advanced UVM/setting-up-the-register-layer">Setting up the Register Layer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/the-proper-care-and-feeding-of-sequences">The Proper Care and Feeding of Sequences</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/understanding-the-factory-and-configuration">Understanding the Factory and Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/using-the-register-layer">Using the Register Layer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/writing-and-managing-tests">Writing and managing Tests</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">UVM</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Advanced UVM</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Setting up the Register Layer</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Setting up the Register Layer</h1><blockquote><p>Contents are extracted from the Advanced UVM sessions by <a href="https://verificationacademy.com/" target="_blank" rel="noopener noreferrer">Verification Academy</a>.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-model-structure">Register model structure<a class="hash-link" href="#register-model-structure" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled-a2dfaed131c485d544f50814ad049c19.png" width="1215" height="596" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="uvm-registers-are-layered">UVM Registers are Layered<a class="hash-link" href="#uvm-registers-are-layered" title="Direct link to heading">​</a></h2><p><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong>UVM Register Layer provides protocol-independent register-based layering<strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 1-4fab713c4554e36d4fcc10c5bce69fca.png" width="697" height="277" class="img_ev3q"></p><blockquote><p>Keep the operation abstract enough to be independent from the physical specific implementation of the register</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="uvm-register-use-models">UVM Register use models<a class="hash-link" href="#uvm-register-use-models" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stimulus-generation"><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong>Stimulus generation<strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong><a class="hash-link" href="#stimulus-generation" title="Direct link to heading">​</a></h3><ul><li>Firmware-level abstraction of stimulus:<ul><li>i.e. Set this bit in this register rather than write x to address y</li></ul></li><li>Stimulus reuse<ul><li>If the bus agent changes, the stimulus still work</li></ul></li><li>Front and Back door access:<ul><li>Front door is via agent</li><li>Back door is directly to the hardware via the simulator database</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">​</a></h3><ul><li>Register model reflects hardware programmable registers</li><li>Set up desired configuration in the register model then dump to DUT<ul><li>Randomization with configuration constraints</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="analysis-mirror">Analysis ‘Mirror’<a class="hash-link" href="#analysis-mirror" title="Direct link to heading">​</a></h3><ul><li>Current state of the register model matches the DUT hardware</li><li>Useful for scoreboards and functional coverage monitors</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-information-model">Register Information model<a class="hash-link" href="#register-information-model" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 2-183f9350b8e618b37c792c9aabd4557b.png" width="2470" height="937" class="img_ev3q"></p><blockquote><p>Blocks are also hierarchical</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="registers-blocks--maps">Registers, Blocks &amp; Maps<a class="hash-link" href="#registers-blocks--maps" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="registers">Registers<a class="hash-link" href="#registers" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 3-7ddd97e5eb32151be5cc529d1eea7400.png" width="2475" height="998" class="img_ev3q"></p><blockquote><p><code>build()</code> method will be use for the register block to configure and make sure the fields are properly aligned and configured to model the register</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="blocks--maps">Blocks &amp; Maps<a class="hash-link" href="#blocks--maps" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 4-eff90b01a3754b63b7fe5119af5d173c.png" width="2475" height="1172" class="img_ev3q"></p><p>In the register block <code>build</code> method:</p><ul><li>Instantiate and build the registers</li><li>Declare the HDL path of the register for backdoor accesses</li><li>Create map will be used to hold the register’s physical addresses</li></ul><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 5-3f208edb5332f38556717df50ec036e2.png" width="2479" height="1169" class="img_ev3q"></p><blockquote><p><code>add_hdl_path_slice</code> will be used to declare the HDL path for the register will be used for backdoor accesses</p></blockquote><blockquote><p><code>add_hdl_path</code> will be used to declare the HDL path to the module containing the implementation of the registers declared in the register block</p></blockquote><blockquote><p><code>lock_model()</code> method is used to ensure no one can change the register model’s information during the simulation</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="register-blocks-are-hierarchical">Register blocks are Hierarchical<a class="hash-link" href="#register-blocks-are-hierarchical" title="Direct link to heading">​</a></h3><blockquote><p>Register block can also contain other register blocks</p><ul><li>Define the default map containing the base address, the endianness</li><li>Setup the sub register blocks by instantiating, configurating and building the sub register blocks</li><li>Add the sub register map to the current default map, specifying the offset of the sub register map inside the default map of the SoC</li></ul></blockquote><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 6-330c9a4ad4836bb7f57cd573b1536f48.png" width="2466" height="1162" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-register-map---uvm_reg_map">The Register Map - <code>uvm_reg_map</code><a class="hash-link" href="#the-register-map---uvm_reg_map" title="Direct link to heading">​</a></h2><p><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>Contains offsets for:<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p><ul><li>Registers and Memories</li><li>(Hierarchical blocks)</li><li>(Sub-maps)</li></ul><p><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>Also provides means to access registers<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p><ul><li>Handle for the target sequencer<blockquote><p>To instantiate transaction to driver for front door access</p></blockquote></li><li>Handle for register layer adapter<blockquote><p>Convert register level transaction to bus level transaction</p><p>A specialize handler manage the job of the translation sequence mentioned before</p></blockquote></li></ul><p><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>****</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>A block can have &gt; 1 map<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>****</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p><blockquote><p>Since there maybe are multiple interfaces being used to access the same physical registers in the DUT</p></blockquote><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 7-b0c6e98f4b14803ee33f51b55cc28d75.png" width="335" height="369" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-the-register-map">Setting up the Register Map<a class="hash-link" href="#setting-up-the-register-map" title="Direct link to heading">​</a></h3><blockquote><p>Is a part of the environment</p><p><code>build_phase</code> of the environment will be used to fetch the register block handle from the configuration DB</p><p><code>connect_phase</code> of the environment will be used to setup the register block</p><p>If the agent is active, a register adapter will be instantiated to use the agent’s sequencer and driver to access the register through the connected interface</p><p>Check if the register model is on the top of the hierarchy, if it is then call the <code>set_sequencer</code> method in the register map to tell the map which sequencer will be using to talk to the driver and what converter object will be used to translate the register access into bus transaction</p><p><code>set_auto_predict</code> method is used to adjust the auto predict function of the register model (default is 0)</p></blockquote><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 8-630c4e4c21c5228e21e251d6256fda24.png" width="981" height="464" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-do-register-accesses-work">How do register accesses work?<a class="hash-link" href="#how-do-register-accesses-work" title="Direct link to heading">​</a></h2><p><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>When an explicit register access method is call<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p><ul><li>The register layer uses a generic register command: <code>Register[Read/Write](data)</code></li></ul><p><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong>The register transaction is passed to the address map<strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></p><ul><li>The map’s adapter (extended from <code>uvm_reg_adapter</code>) converts the register transaction to a bus transaction</li></ul><p><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>****</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>This is then sent through a layering to the target bus agent<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>****</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 9-32d26860c5596c32b1cda1598f080b20.png" width="1086" height="680" class="img_ev3q"></p><p><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>****</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>Predictor updates the value of the register model<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>****</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p><ul><li>Bus transaction (from the monitor) converted back to Register transaction using the adapter</li><li>Write: Value that was written to DUT will be reflected</li><li>Read: Value that was read from the DUT will be reflected</li></ul><p>⇒ Keeps the value in the register model is the same as the value in the physical registers</p><p><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>The predictor then writes the register transaction out of its <code>analysis_port</code>**</p><ul><li>Generic register requests to target bus sequence items</li></ul><blockquote><p>Should be the same as the <strong><em>reconstruction monitor</em></strong></p></blockquote><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 10-5f73083144920a1241ef4073f6a7145e.png" width="1084" height="760" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-adapter-example">Register Adapter example<a class="hash-link" href="#register-adapter-example" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 11-b0db7d13d9cebb4ca2023f324e0fac0c.png" width="2386" height="1173" class="img_ev3q"></p><blockquote><p><code>uvm_reg_bus_op</code> is a struct, containing the information of the register operation (whether a write or a read, the address and the data)</p></blockquote><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 12-ff7f47567b44323e411daaddcad51f73.png" width="2453" height="1156" class="img_ev3q"></p><blockquote><p>The argument is <code>ref</code> type: The struct is passed in when it is called, and the method will fill in the appropriate fields of the struct</p></blockquote><blockquote><p>Status value <code>UVM_HAS_X</code> is also legal</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-model-testbench-intergration">Register model Testbench intergration<a class="hash-link" href="#register-model-testbench-intergration" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 13-d83af3314ce4b1b2a57553de9773dc1d.png" width="2469" height="1048" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="stimulus-reuse-bridge-example">Stimulus reuse (bridge example)<a class="hash-link" href="#stimulus-reuse-bridge-example" title="Direct link to heading">​</a></h2><p><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>****</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>SPI master is integrated inside an AHB peripheral block<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>****</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p><p><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>Host bus sequences can be reused as is<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong> </p><p><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>Testbench structure changes<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 14-b5549c5a805dc2e3624eab55457bd263.png" width="1779" height="349" class="img_ev3q"></p><blockquote><p>Only have to add the register map of the SPI map, and swap in the new register to bus adapter for the new protocol</p></blockquote><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 15-7a04e0d8de07c270c3f39c8b264cced8.png" width="720" height="324" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="uvm-register-assistant">UVM Register Assistant<a class="hash-link" href="#uvm-register-assistant" title="Direct link to heading">​</a></h2><p><strong><strong>****</strong></strong>Automatically generates UVM register package<strong><strong>****</strong></strong></p><ul><li>Supports all UVM access Modes</li><li>Registers/Fields, Memories, Blocks, Sub-blocks</li></ul><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 16-eabb3af6e6c1ca219c59c4a836253419.png" width="2301" height="732" class="img_ev3q"></p><p>Refer to </p><p><a href="https://verificationacademy.com/seminars/uvm-recipe-automating-the-creation-of-your-uvm-register-model" target="_blank" rel="noopener noreferrer">Automating the Creation of Your UVM Register Model | UVM Recipe of the Month | Verification Academy</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 17-f35ecfadf991fda0fd9202bbcd86b85a.png" width="1358" height="1052" class="img_ev3q"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/UVM/Advanced UVM/registered-based-testing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Register-Based Testing</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/UVM/Advanced UVM/the-proper-care-and-feeding-of-sequences"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">The Proper Care and Feeding of Sequences</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#register-model-structure" class="table-of-contents__link toc-highlight">Register model structure</a></li><li><a href="#uvm-registers-are-layered" class="table-of-contents__link toc-highlight">UVM Registers are Layered</a></li><li><a href="#uvm-register-use-models" class="table-of-contents__link toc-highlight">UVM Register use models</a><ul><li><a href="#stimulus-generation" class="table-of-contents__link toc-highlight"><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong>Stimulus generation<strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#analysis-mirror" class="table-of-contents__link toc-highlight">Analysis ‘Mirror’</a></li></ul></li><li><a href="#register-information-model" class="table-of-contents__link toc-highlight">Register Information model</a></li><li><a href="#registers-blocks--maps" class="table-of-contents__link toc-highlight">Registers, Blocks &amp; Maps</a><ul><li><a href="#registers" class="table-of-contents__link toc-highlight">Registers</a></li><li><a href="#blocks--maps" class="table-of-contents__link toc-highlight">Blocks &amp; Maps</a></li><li><a href="#register-blocks-are-hierarchical" class="table-of-contents__link toc-highlight">Register blocks are Hierarchical</a></li></ul></li><li><a href="#the-register-map---uvm_reg_map" class="table-of-contents__link toc-highlight">The Register Map - <code>uvm_reg_map</code></a><ul><li><a href="#setting-up-the-register-map" class="table-of-contents__link toc-highlight">Setting up the Register Map</a></li></ul></li><li><a href="#how-do-register-accesses-work" class="table-of-contents__link toc-highlight">How do register accesses work?</a></li><li><a href="#register-adapter-example" class="table-of-contents__link toc-highlight">Register Adapter example</a></li><li><a href="#register-model-testbench-intergration" class="table-of-contents__link toc-highlight">Register model Testbench intergration</a></li><li><a href="#stimulus-reuse-bridge-example" class="table-of-contents__link toc-highlight">Stimulus reuse (bridge example)</a></li><li><a href="#uvm-register-assistant" class="table-of-contents__link toc-highlight">UVM Register Assistant</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Duong Van (@yanagi.dev). Powered by Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f7de18b3.js"></script>
<script src="/assets/js/main.ca8e2220.js"></script>
</body>
</html>