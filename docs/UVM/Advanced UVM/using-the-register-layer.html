<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-UVM/Advanced UVM/Using the Register Layer 09a6b5ff47434deab1457ad0938241fc">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Using the Register Layer | Duong Van (@yanagi.dev)</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://yanaginx.github.io/docs/UVM/Advanced UVM/using-the-register-layer"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Using the Register Layer | Duong Van (@yanagi.dev)"><meta data-rh="true" name="description" content="Contents are extracted from the Advanced UVM sessions by Verification Academy."><meta data-rh="true" property="og:description" content="Contents are extracted from the Advanced UVM sessions by Verification Academy."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://yanaginx.github.io/docs/UVM/Advanced UVM/using-the-register-layer"><link data-rh="true" rel="alternate" href="https://yanaginx.github.io/docs/UVM/Advanced UVM/using-the-register-layer" hreflang="en"><link data-rh="true" rel="alternate" href="https://yanaginx.github.io/docs/UVM/Advanced UVM/using-the-register-layer" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Duong Van (@yanagi.dev) RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Duong Van (@yanagi.dev) Atom Feed">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.cf3804fa.css">
<link rel="preload" href="/assets/js/runtime~main.c1cd15c2.js" as="script">
<link rel="preload" href="/assets/js/main.d7319521.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">Howdy! This site is still under construction so there might be some missing content. Hope you still enjoy your stay here!</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-main.svg" alt="YNG.dev Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-main.svg" alt="YNG.dev Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">DV</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Notes</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/extras/site-info">Extras</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yanaginx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/systemverilog">SystemVerilog</a><button aria-label="Toggle the collapsible sidebar category &#x27;SystemVerilog&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Definitions &amp; Concepts/circuit-and-system-perspective-notes">Definitions &amp; Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Protocol/fifo_interface">Protocol</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/category/advanced-uvm">UVM</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/advanced-uvm">Advanced UVM</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced UVM&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/architecting-a-uvm-testbench">Architecting a UVM Testbench</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/how-tlm-works">How TLM Works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/layered-sequences">Layered Sequences</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/modeling-transactions">Modeling transactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/registered-based-testing">Register-Based Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/setting-up-the-register-layer">Setting up the Register Layer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/the-proper-care-and-feeding-of-sequences">The Proper Care and Feeding of Sequences</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/understanding-the-factory-and-configuration">Understanding the Factory and Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/UVM/Advanced UVM/using-the-register-layer">Using the Register Layer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/UVM/Advanced UVM/writing-and-managing-tests">Writing and managing Tests</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">UVM</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/advanced-uvm"><span itemprop="name">Advanced UVM</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Using the Register Layer</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Using the Register Layer</h1><blockquote><p>Contents are extracted from the Advanced UVM sessions by <a href="https://verificationacademy.com/" target="_blank" rel="noopener noreferrer">Verification Academy</a>.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="uvm-register-class-access-api">UVM register class access API<a class="hash-link" href="#uvm-register-class-access-api" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled-5ffee4d7ef701ad2798c4b958be1ff36.png" width="146" height="173" class="img_ev3q"></p><p><em>The register model has two register variables</em></p><ul><li>Desired value: For when a field has been updated, but not the hardware</li><li>Mirrored value: Containing the latest known value from the hardware</li></ul><p>*<code>reg.read()</code> and <code>reg.write()</code>**</p><ul><li>Access the hardware register and update the register database</li><li>Front door access access uses bus agent - takes time and may create side effects</li><li>Back door access is instant (via VPI - <em>Verilog Procedural Interface</em>) and does not cause side effects</li><li>Not used for individual fields</li></ul><p><em><code>reg.peek()</code> and <code>reg.poke()</code></em></p><blockquote><p>Explicit backdoor access to the DUT register and also update the register model</p><ul><li>For backdoor accesses, register model updated with result</li><li>Can be used for individual fields</li></ul></blockquote><p><em><code>reg.set()</code> and <code>reg.get()</code></em></p><ul><li>Access the desired value directly</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-access-method-fields">Register access method fields<a class="hash-link" href="#register-access-method-fields" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 1-c9864e1f773e5239dcb02f3c93ec0512.png" width="700" height="359" class="img_ev3q"></p><p><em>A typical register access only needs a few of the arguments:</em></p><div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spi_rm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wdata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">parent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Parent of the register access, which is the sequence that includes the method call</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="front-door-access-modes">Front-Door access modes<a class="hash-link" href="#front-door-access-modes" title="Direct link to heading">​</a></h2><p><em>Consume time on the bus (default)</em></p><div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spi_rm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wdata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> UVM_FRONTDOOR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">parent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spi_rm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rdata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> UVM_FRONTDOOR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">parent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>UVM reg sequence API alternatively:</p><blockquote><p>Don’t have to specify the parent sequence since it is built in for the register sequence</p><p>Recommended to use </p></blockquote><div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">write_reg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wdata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> UVM_FRONTDOOR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">read_reg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rdata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> UVM_FRONTDOOR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 2-91e61ac1ae0c3f01e4fc81c9a32799bd.png" width="399" height="181" class="img_ev3q"></p><p><em>Desired and mirrored values updated at the end of the transaction</em></p><ul><li>Based on transaction contents and field access mode</li></ul><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 3-ea00806fddc332b641344ae906ed594f.png" width="617" height="224" class="img_ev3q"></p><p><em>Can access individual fields</em></p><ul><li>Only if hardware supports it<ul><li><p>Field = byte lane</p><blockquote><p>Will execute the full read-modify-write flow to the particular register field</p></blockquote></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="back-door-access-modes">Back-Door access modes<a class="hash-link" href="#back-door-access-modes" title="Direct link to heading">​</a></h2><p><em>Consume no time on the bus</em></p><div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">write_reg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wdata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> UVM_BACKDOOR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">read_reg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rdata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> UVM_BACKDOOR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>When using this, the backdoor path must be specified explicitly</p></blockquote><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 4-553950c866042f01320f6d545da5db51.png" width="627" height="252" class="img_ev3q"></p><p><em>Desired and mirrored values updated at the end of the transaction</em></p><ul><li>Based on transaction contents and field access modes</li></ul><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 5-ca0cf4be26c4a9679d2ea4dd9c0b9b5e.png" width="592" height="240" class="img_ev3q"></p><p><em>Can only access full register via backdoor access</em></p><p><em>Using peek/poke:</em></p><div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">poke_reg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wdata</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">peek_reg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rdata</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Desired and mirrored values updated directly at the end of the transaction</em></p><ul><li>Poke sets the actual register value</li><li>Peek samples the actual value, which is written to model</li></ul><p><em>Peek/Poke work on fields</em></p><blockquote><p>Peek and poke don’t care about the access mode of the register</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="direct-access-modes">Direct access modes<a class="hash-link" href="#direct-access-modes" title="Direct link to heading">​</a></h2><blockquote><p>Access the desired value of the register model directly</p></blockquote><p><em>Consume no time on the bus</em></p><p><em>Access the desired value directly</em></p><div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wdata</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">randomize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rdata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 6-32246e864a3a4264f3d5e5d02906ca8e.png" width="385" height="183" class="img_ev3q"></p><p><em>Use <code>update()</code> method to update actual value</em></p><ul><li>via front-door: <code>update_reg(model.ctrl, status, UVM_FRONTDOOR);</code></li><li>or back-door: <code>update_reg(model.ctrl, status, UVM_BACKDOOR);</code></li></ul><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 7-1dca2c3eab3955d4af06d606d6864315.png" width="364" height="187" class="img_ev3q"></p><blockquote><p>If the desired value is different from the actual value, the register model will write the desired value directly to the actual register</p><p>The change will be reflected on the mirrored value of the register model also</p></blockquote><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 8-f3b8261b43a6c1f5021890f0ea033bf6.png" width="559" height="189" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mirror-method">Mirror method<a class="hash-link" href="#mirror-method" title="Direct link to heading">​</a></h2><p><em>Read register and update/check mirror value</em></p><ul><li>via front-door: <code>mirror_reg(model.ctrl, status, UVM_CHECK, UVM_FRONTDOOR);</code></li><li>via back-door: <code>mirror_reg(model.ctrl, status, UVM_CHECK, UVM_BACKDOOR);</code></li></ul><blockquote><p>Check will response with error if the mirrored value different from the actual value</p><p>The result of the mirror operation is the mirror value will be the same as the actual value, but if they are different from the beginning then the error will occur</p></blockquote><p><em>Can be called on field, reg or block</em></p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 9-49282454fdba797ebfc255ee791d013a.png" width="522" height="192" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-sequence-base-class">Register sequence base class<a class="hash-link" href="#register-sequence-base-class" title="Direct link to heading">​</a></h2><blockquote><p>Extended these to write register level sequences</p></blockquote><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 10-25b9f11df4ac2524d3d35a2a82535987.png" width="974" height="170" class="img_ev3q"></p><blockquote><p>Base class provides simpler API for interfacing with the register</p></blockquote><p>Extend the <code>uvm_reg_sequence</code> base class and override the register model type </p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 11-287f21eeee45b4c07b54cce3aeac2353.png" width="832" height="466" class="img_ev3q"></p><blockquote><p>In this case the 2 operation will be accessed through front-door</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-stimulus-base-class">Register stimulus: base class<a class="hash-link" href="#register-stimulus-base-class" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 12-20aed551af001a44aa784720e23b7d2b.png" width="985" height="395" class="img_ev3q"></p><blockquote><p>Declare and use the set register model API to set the correct register model for extended register sequences</p><p>The set register model must be called after the sequence is created and before the sequence start</p><p>The <code>body</code> method of the base sequence contains additional setup when needed</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-stimulus-building-on-the-base">Register stimulus: Building on the base<a class="hash-link" href="#register-stimulus-building-on-the-base" title="Direct link to heading">​</a></h2><blockquote><p>First is to call the <code>super.body</code> on the extended register sequence to start the setup from the base class may need</p><p>The <code>set_rm</code> of the base class will be called from the test before starting the extended sequence (<code>div_load_seq</code> in this case), so the register model will be using is known </p></blockquote><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 13-806ffd9d911b0280c0c7b3d55b37299e.png" width="954" height="445" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-sequence-tx-data-load">Register sequence: TX Data Load<a class="hash-link" href="#register-sequence-tx-data-load" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 14-3fa468c8b791755de62a7506e58c15a9.png" width="977" height="447" class="img_ev3q"></p><aside><img loading="lazy" src="https://www.notion.so/icons/info-alternate_blue.svg" alt="https://www.notion.so/icons/info-alternate_blue.svg" width="40px" class="img_ev3q"> The base register sequence will be used for setting up the necessary register model and instantiation, the extended register sequence will then only need to adjust to match the details need of the test plan without worrying to much about what register model will be used and so on</aside><h2 class="anchor anchorWithStickyNavbar_LWe7" id="built-in-sequences">Built-in sequences<a class="hash-link" href="#built-in-sequences" title="Direct link to heading">​</a></h2><p><em>Sequences are easy to run</em></p><ul><li>Low overhead to use</li><li>Useful for initial sanity checks on bus connectivity</li></ul><p><em>Access modes are respected</em></p><ul><li>Read only registers are not bit bashed</li><li>Read only memories are not tested</li></ul><p><em>Memories, Registers or Fields can be opted out of a test</em></p><ul><li>e.g., Clock enable bit</li><li>Mechanism is to use the <code>uvm_config_db</code> to set an attribute for the register</li></ul><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 15-042b0347ee25f562d5949adff8cc3912.png" width="972" height="299" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">​</a></h2><p><em>Register model follows hardware structure</em></p><ul><li>Fields, Registers, Blocks, Maps</li><li>Internal access - <code>get()</code>, <code>set()</code>, etc.<ul><li>Sets up desired value</li></ul></li><li>External access - Front door and back door</li></ul><p><em>Access layered via model</em></p><ul><li>Generic sequences adapted to target bus sequences</li><li>Sequence reuse straight-forward</li></ul><p><em>Use the convenience API</em></p><ul><li>Extend <code>uvm_reg_sequence</code></li><li><code>write_reg()</code>/ <code>read_reg()</code> vs <code>write()</code> / <code>read()</code><ul><li>Don’t have to worry about the <code>.parent()</code> argument</li></ul></li></ul><blockquote><p>Recommended to use the <code>write_reg</code> and <code>read_reg</code> on the <code>uvm_reg_sequence</code> base class</p></blockquote></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/UVM/Advanced UVM/understanding-the-factory-and-configuration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Understanding the Factory and Configuration</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/UVM/Advanced UVM/writing-and-managing-tests"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Writing and managing Tests</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#uvm-register-class-access-api" class="table-of-contents__link toc-highlight">UVM register class access API</a></li><li><a href="#register-access-method-fields" class="table-of-contents__link toc-highlight">Register access method fields</a></li><li><a href="#front-door-access-modes" class="table-of-contents__link toc-highlight">Front-Door access modes</a></li><li><a href="#back-door-access-modes" class="table-of-contents__link toc-highlight">Back-Door access modes</a></li><li><a href="#direct-access-modes" class="table-of-contents__link toc-highlight">Direct access modes</a></li><li><a href="#mirror-method" class="table-of-contents__link toc-highlight">Mirror method</a></li><li><a href="#register-sequence-base-class" class="table-of-contents__link toc-highlight">Register sequence base class</a></li><li><a href="#register-stimulus-base-class" class="table-of-contents__link toc-highlight">Register stimulus: base class</a></li><li><a href="#register-stimulus-building-on-the-base" class="table-of-contents__link toc-highlight">Register stimulus: Building on the base</a></li><li><a href="#register-sequence-tx-data-load" class="table-of-contents__link toc-highlight">Register sequence: TX Data Load</a></li><li><a href="#built-in-sequences" class="table-of-contents__link toc-highlight">Built-in sequences</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Duong Van (@yanagi.dev). Powered by Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c1cd15c2.js"></script>
<script src="/assets/js/main.d7319521.js"></script>
</body>
</html>